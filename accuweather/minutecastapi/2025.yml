# 1. METADATOS
#-------------------------------------------
provider: AccuWeather
api: Core Weather API

# 2. MODELO DE CONSUMO GLOBAL (Defaults)
#-------------------------------------------
# Reglas que aplican a TODOS los planes, a menos que un plan 
# específico diga lo contrario.
global_consumption_model:

  # El "contador" por defecto aplica a nivel de API Key
  # TODO: no lo tengo aún claro, pero imagino que será o api_key, o bien IPs.
  segmentation_model: unknown 
  
  # Categorías de Límites
  volume: null
  
  speed: null
  
  # AÑADIDO CATEGORÍA DE RECURSOS (IMAGINO QUE IRÁ RELACIONADO CON LOS MODELOS DE SEGMENTACIÓN)
  resources: null

  overload:

    caching_policy:
      description: "Recommend caching responses using the Expires Header to maintain a 'healthy reputation' and avoid 429s"

# 3. PLANES
#-------------------------------------------
# Cada plan define su precio y SÓLO las reglas de consumo
# que AÑADEN o SOBREESCRIBEN al modelo global.
plans:

  Free Trial:
    # --- Comercial ---
    price: 0 USD
    billing_period: 14 days
    renewable: false
    # --- Modelo de Consumo ---
    consumption_model:
      volume:
        quote:
          unit: calls
          value: 50
          period: 1 day
        overage_cost: null
      
      # Este plan AÑADE un límite de recurso
      resources:
        api_keys:
          value: 1
          # Este límite específico tiene un alcance DIFERENTE al global
          scope: per_developer 

  Lite:
    # --- Comercial ---
    price: 25 USD
    billing_period: 1 month
    renewable: true

    # --- Modelo de Consumo ---
    consumption_model:
      volume:
        quote:
          unit: calls
          value: 10000
          period: 1 month
        overage_cost:
          unit: USD/CPM (cost per 1000 calls)
          value: 0.18

  Full:
    # --- Comercial ---
    price: 100 USD
    billing_period: 1 month
    renewable: true

    # --- Modelo de Consumo ---
    consumption_model:
      volume:
        quote:
          unit: calls
          value: 675000
          period: 1 month
        overage_cost:
          unit: USD/CPM (cost per 1000 calls)
          value: 0.12